'use strict';
<<<<<<< HEAD
const path = require('path');
const loadJsonFile = require('load-json-file');
const pathType = require('path-type');

module.exports = (fp, opts) => {
=======
var path = require('path');
var loadJsonFile = require('load-json-file');
var normalizePackageData = require('normalize-package-data');
var pathType = require('path-type');

module.exports = function (fp, opts) {
>>>>>>> b2acda3bc21b6f1240ec61d6ee7e7ca4008c8cfd
	if (typeof fp !== 'string') {
		opts = fp;
		fp = '.';
	}

	opts = opts || {};

	return pathType.dir(fp)
<<<<<<< HEAD
		.then(isDir => {
=======
		.then(function (isDir) {
>>>>>>> b2acda3bc21b6f1240ec61d6ee7e7ca4008c8cfd
			if (isDir) {
				fp = path.join(fp, 'package.json');
			}

			return loadJsonFile(fp);
		})
<<<<<<< HEAD
		.then(x => {
			if (opts.normalize !== false) {
				require('normalize-package-data')(x);
=======
		.then(function (x) {
			if (opts.normalize !== false) {
				normalizePackageData(x);
>>>>>>> b2acda3bc21b6f1240ec61d6ee7e7ca4008c8cfd
			}

			return x;
		});
};

<<<<<<< HEAD
module.exports.sync = (fp, opts) => {
=======
module.exports.sync = function (fp, opts) {
>>>>>>> b2acda3bc21b6f1240ec61d6ee7e7ca4008c8cfd
	if (typeof fp !== 'string') {
		opts = fp;
		fp = '.';
	}

	opts = opts || {};
	fp = pathType.dirSync(fp) ? path.join(fp, 'package.json') : fp;

<<<<<<< HEAD
	const x = loadJsonFile.sync(fp);

	if (opts.normalize !== false) {
		require('normalize-package-data')(x);
=======
	var x = loadJsonFile.sync(fp);

	if (opts.normalize !== false) {
		normalizePackageData(x);
>>>>>>> b2acda3bc21b6f1240ec61d6ee7e7ca4008c8cfd
	}

	return x;
};
